pipeline{
    agent {
        label 'ubuntu-slave'
    }
    options {
        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '2', daysToKeepStr: '', numToKeepStr: '5')
    }
    stages{
        stage("Checkout"){
            steps{
                cleanWs()
                checkout scm
                sh """
                ls -ltr
                """
            }
        }
        stage("Build"){
             tools {
                maven 'maven-3.2.5'
            }
            steps{
                sh """
                mvn clean install
                cp target/demo-0.0.1-SNAPSHOT.jar helloWorld-${BUILD_NUMBER}.jar
                """
            }
        }
    }
    post {
        always {
            sh "echo Pipeline Finished"
        }
    }
}